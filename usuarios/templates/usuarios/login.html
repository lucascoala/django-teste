{% extends 'paginas/modelo.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block conteudo %}
<div class="row">
    <div class="col-md-8 mx-auto">
        {% if request.user.is_authenticated %}
        <div class="card mt-4">
            <div class="card-body">
                <h2><i class="fa fa-exclamation" aria-hidden="true"></i> Ação não permitida</h2>
                <p class="lead">O usuário <strong>{{ request.user }}</strong> não tem permissão para realizar ou visualizar essa operação.</p>
            </div>
            <div class="card-footer">
                <a class="dropdown-item" href="{% url 'logout' %}">
                    <i class="fa fa-sign-out" aria-hidden="true"></i>
                    Sair
                </a>
            </div>
        </div>
        {% else %}
        <div class="mx-auto">
            <div class="card mt-4 p-4" style="background-color: #fff!important;min-width: 50vw;">
                <div class="card-body">
                    <div class="text-center mt-4 mb-4">
                        <img src="{% static 'img/NovaLogoIPB.png' %}" height="60" alt="">
                        <h2 class="mt-4"><strong>Autenticação</strong></h2>
                        <p class="mt-2">Preencha todos os campos obrigatórios.</p>
                    </div>
                    <hr>
                    <form method="post">
                        {% csrf_token %}
                        <div class="form-group">
                            <label for="id_username">Usuário</label>
                            {{ form.username|as_crispy_field }}
                        </div>
                        <div class="form-group">
                            <label for="id_password">Senha</label>
                            {{ form.password|as_crispy_field }}
                        </div>
                        <input type="hidden" name="next" value="{{ next }}">
                        <button type="submit" class="btn btn-primary btn-block">Entrar</button>
                    </form>
                    <div class="text-center">
                        <a href="{% url 'alterar-senha' %}" class="small">Alterar Senha</a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>

{% if messages %}
<div class="container mt-3">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    {% endfor %}
</div>
{% endif %}
{% endblock %}


